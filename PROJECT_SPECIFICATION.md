# タスク自動整理システム (TM-OS) 仕様書

## 1. プロジェクト概要
LINE Messaging APIとNext.js、Supabase、Gemini AIを組み合わせたタスク管理システム。
ユーザーがLINEから入力したタスクをAIが自動解析し、優先度（S, A, B, C, DEV, IDEA）に応じて自動分類・整理する。

## 2. デザインコンセプト
- ** Rich Aesthetics**: ダークモード（#050608基調）を採用し、ネオンカラーやグラデーションを用いたサイバーパンク・プレミアムなデザイン。
- **UI 構成**:
  - ヘッダー: タイトル（タスク自動整理 verYY.MM.DD.HH:mm）、検索検索窓、AIタスク追加窓、ヘルプボタン、更新ボタン。
  - メイングリッド: 6カラム構成（S, A, B, C, DEV, IDEA）。
  - 下部ドロップゾーン: モバイル向けの操作エリア（完了、保留、静観、削除）。
  - サイドドロワー: 完了済みなどのタスク一覧を表示。

## 3. 主要機能
### 3.1 タスク入力と同期
- **LINE連携**: メッセージ送信でAIがタスクを抽出。複数行送信で一括登録。
- **AI解析**: Gemini APIを使用。タイトル、優先度、カテゴリーを自動判定。
- **ダッシュボード**: リアルタイム（focus時自動更新）でLINEからの入力を反映。

### 3.2 タスク操作
- **ドラッグ＆ドロップ**: `@dnd-kit` を使用。カラム移動（優先度変更）や下部アイコンへのドロップ（ステータス変更）が可能。
- **直接編集**: タイトルをタップして編集。
- **検索・フィルタリング**: ヘッダーの検索窓からタスクを絞り込み。非該当タスクは透過表示される。

### 3.3 セキュリティと通知
- **アクセスログ**: 管理者画面（/dev）へのアクセスを監視し、DBに記録。
- **管理者通知**: 非管理者が機密エリアにアクセスした場合、またはシステムエラー発生時に管理者のLINEへ即座に通知を送信。
- **環境変数**: `ADMIN_LINE_ID` で管理者を特定。

### 3.4 設定の永続化
- **ユーザー設定**: カラム名（特に 'DEV'）のカスタマイズ内容をSupabaseに保存。
- **マルチデバイス対応**: 異なるデバイスやブラウザでも設定が引き継がれる。

## 4. UI 演出
- **新規タスク強調**: 新しく追加されたタスクは5秒間、グリーンのフラッシュアニメーション（`animate-flash-highlight`）を表示。
- **ローディング・エラー**: スタイリッシュなオーバーレイとエラートーストによるフィードバック。

## 5. カラム定義 (Priority)
- **S**: 重要＋緊急（赤）
- **A**: 緊急のみ（オレンジ）
- **B**: 重要のみ（青）
- **C**: 低優先（エメラルド）
- **DEV**: 開発中・自由設定（インディゴ）※タイトル変更可能
- **IDEA**: 💡 アイデア（ピンク）
